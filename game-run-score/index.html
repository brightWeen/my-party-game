<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>奔跑吧! 宇航员</title>
  <link rel="stylesheet" href="css/score.css">
  <script src="js/flexible.js"></script>
</head>

<!--run energy-->
<body class="re-step_1">
<audio src="mp3/bg.mp3" preload id="music" loop="loop"></audio>
<div class="re-container">
  <div class="re-title"></div>
  <div class="re-intro">
    <div class="re-intro_text"></div>
  </div>
  <div class="re-countdown"></div>
  <div class="re-energy">
    <div class="re-energy_label-lastime"></div>
    <div class="re-energy_label-score"></div>
    <div class="re-energy_unit-lastime"></div>
    <div class="re-energy_unit-score"></div>
    <div class="re-energy_timing" id="energy-timing">
      <span class="re-timing"></span>
      <span class="re-timing"></span>
    </div>
    <div class="re-energy_mileage" id="energy-mileage">
      <span class="re-number"></span>
      <span class="re-number"></span>
      <span class="re-number"></span>
      <span class="re-number"></span>
      <span class="re-number"></span>
    </div>
  </div>
  <div class="re-complete">
    <div class="re-complete_title"></div>
    <div class="re-complete_score" id="complete-score">
      <span class="re-number"></span>
      <span class="re-number"></span>
      <span class="re-number"></span>
      <span class="re-number"></span>
      <span class="re-number"></span>
    </div>
    <div class="re-complete_unit"></div>
  </div>
  <div class="re-moon" id="moon">
    <div class="re-spaceman" id="spaceman"></div>
    <div class="re-footprints"></div>
    <div class="re-start"></div>
    <div class="re-foot">
      <div class="re-foot_btn re-foot_left"></div>
      <div class="re-foot_btn re-foot_right"></div>
    </div>
  </div>
</div>
<script>
  var audio = document.getElementById("music");
  audio.preload = 'auto';
  audio.play();

  //    autoPlayMusic(audio);
  backgroundMusic(audio);
  // 音乐播放
  function autoPlayMusic(audio, other) {
    var o = 0;
    if (other) {
      for (o = 0; o < other.length; o++) {
        other[o].pause();
      }
    }
    if (window.WeixinJSBridge) {
      WeixinJSBridge.invoke('getNetworkType', {}, function (e) {
        if (audio.paused) {
          audio.play();
        }
      });
    } else {
      audio.play();
    }
  }
  ///////////////////////

  function backgroundMusic(audio) {
    // 自动播放音乐效果，解决浏览器或者APP自动播放问题
    if (audio.paused) {
      audio.load();
      audio.play();
    }
    function musicInBrowserHandler() {
      if (audio.paused) {
        audio.load();
        audio.play();
      }
      document.body.removeEventListener('touchstart', musicInBrowserHandler);
    }
    document.body.addEventListener('touchstart', musicInBrowserHandler);

    // 自动播放音乐效果，解决微信自动播放问题
    function musicInWeixinHandler() {
      if (audio.paused) {
        audio.load();
        audio.play();
      }
      document.addEventListener("WeixinJSBridgeReady", function () {
        if (audio.paused) {
          audio.load();
          audio.play();
        }
      }, false);
      document.removeEventListener('DOMContentLoaded', musicInWeixinHandler);
    }
    document.addEventListener('DOMContentLoaded', musicInWeixinHandler);
  }
</script>
<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js?_veri=20151101"></script>
<script src="js/score.js"></script>
</body>
</html>